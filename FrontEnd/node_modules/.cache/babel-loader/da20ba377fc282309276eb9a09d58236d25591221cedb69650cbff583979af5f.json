{"ast":null,"code":"// api.js\nconst API = {\n  switchpost: async (event, isChecked, setLoading, setData, data) => {\n    // calling search backend server\n    even;\n    try {\n      let switchstate = new FormData();\n      if (Object.keys(data).length > 1) {\n        setLoading(true);\n      }\n      switchstate.append('state', isChecked.toString());\n      const endpoint = \"http://localhost:8000/search/\";\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        body: switchstate\n      });\n      if (response.ok) {\n        console.log('Switch state updated successfully');\n        await API.getData(setData);\n      } else {\n        console.error('Failed to update switch state');\n      }\n    } catch (error) {\n      console.error('Error: ', error);\n    }\n  },\n  getData: async setData => {\n    // get all the similarities and filenames data to the server\n    try {\n      const endpoint = \"http://localhost:8000/showFile\";\n      const response = await fetch(endpoint);\n      const file = await response.json();\n      if (Object.keys(file).length > 1) {\n        setData(file);\n      } else {\n        alert(\"PLEASE INPUT DATASET or INPUT IMAGE FIRST\");\n      }\n      console.log(\"getData called successfully\");\n    } catch (error) {\n      console.error(\"error:\", error);\n    }\n  },\n  handleUploadChange: async (event, setImage) => {\n    // Handling single input image\n    let uploaded = event.target.files[0];\n    try {\n      const url = URL.createObjectURL(uploaded);\n      setImage(url);\n      let formData = new FormData();\n      formData.append('input_image', uploaded);\n      const endpoint = \"http://localhost:8000/UploadImage/\";\n      const response = await fetch(endpoint, {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        console.log(\"Besok Berhasil\");\n      } else {\n        console.error(\"Upload failed\");\n      }\n    } catch (error) {\n      console.error(\"Error during fetch: \", error);\n    }\n  }\n};\nexport default API;","map":{"version":3,"names":["API","switchpost","event","isChecked","setLoading","setData","data","even","switchstate","FormData","Object","keys","length","append","toString","endpoint","response","fetch","method","body","ok","console","log","getData","error","file","json","alert","handleUploadChange","setImage","uploaded","target","files","url","URL","createObjectURL","formData"],"sources":["C:/Users/Auralea A S/Documents/SEMESTER 3/ALGEO/Tubes_Algeo2_IF2110/FrontEnd/src/components/api.js"],"sourcesContent":["// api.js\r\nconst API = {\r\n    switchpost: async (event,isChecked, setLoading, setData, data) => {   // calling search backend server\r\n      even\r\n      try {\r\n          let switchstate = new FormData();\r\n          if(Object.keys(data).length > 1){\r\n              setLoading(true);\r\n          }\r\n          switchstate.append('state', isChecked.toString());\r\n        \r\n          const endpoint = \"http://localhost:8000/search/\";\r\n          const response = await fetch(endpoint, {\r\n            method: 'POST',\r\n            body: switchstate,\r\n          });\r\n    \r\n          if (response.ok) {\r\n            console.log('Switch state updated successfully');\r\n            await API.getData(setData); \r\n          } else {\r\n            console.error('Failed to update switch state');\r\n          }\r\n    \r\n          \r\n        } catch (error) {\r\n          console.error('Error: ', error);\r\n        }\r\n    \r\n    },\r\n  \r\n    getData: async (setData) => { // get all the similarities and filenames data to the server\r\n      try {\r\n        const endpoint = \"http://localhost:8000/showFile\";\r\n        const response = await fetch(endpoint);\r\n        const file = await response.json();\r\n\r\n        if(Object.keys(file).length > 1){\r\n            setData(file);\r\n        }\r\n        else{\r\n          alert(\"PLEASE INPUT DATASET or INPUT IMAGE FIRST\")\r\n        }\r\n        console.log(\"getData called successfully\");\r\n      } catch (error) {\r\n        console.error(\"error:\", error);\r\n      }\r\n    },\r\n  \r\n    handleUploadChange: async (event, setImage) => { // Handling single input image\r\n        let uploaded = event.target.files[0];\r\n      try {\r\n        const url = URL.createObjectURL(uploaded);\r\n        setImage(url);\r\n  \r\n        let formData = new FormData();\r\n        formData.append('input_image', uploaded);\r\n  \r\n        const endpoint = \"http://localhost:8000/UploadImage/\";\r\n        const response = await fetch(endpoint, {\r\n          method: \"POST\",\r\n          body: formData,\r\n        });\r\n  \r\n        if (response.ok) {\r\n          console.log(\"Besok Berhasil\");\r\n        } else {\r\n          console.error(\"Upload failed\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error during fetch: \", error);\r\n      }\r\n    },\r\n  };\r\n  \r\n  export default API;\r\n  "],"mappings":"AAAA;AACA,MAAMA,GAAG,GAAG;EACRC,UAAU,EAAE,MAAAA,CAAOC,KAAK,EAACC,SAAS,EAAEC,UAAU,EAAEC,OAAO,EAAEC,IAAI,KAAK;IAAI;IACpEC,IAAI;IACJ,IAAI;MACA,IAAIC,WAAW,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAChC,IAAGC,MAAM,CAACC,IAAI,CAACL,IAAI,CAAC,CAACM,MAAM,GAAG,CAAC,EAAC;QAC5BR,UAAU,CAAC,IAAI,CAAC;MACpB;MACAI,WAAW,CAACK,MAAM,CAAC,OAAO,EAAEV,SAAS,CAACW,QAAQ,CAAC,CAAC,CAAC;MAEjD,MAAMC,QAAQ,GAAG,+BAA+B;MAChD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,QAAQ,EAAE;QACrCG,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEX;MACR,CAAC,CAAC;MAEF,IAAIQ,QAAQ,CAACI,EAAE,EAAE;QACfC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;QAChD,MAAMtB,GAAG,CAACuB,OAAO,CAAClB,OAAO,CAAC;MAC5B,CAAC,MAAM;QACLgB,OAAO,CAACG,KAAK,CAAC,+BAA+B,CAAC;MAChD;IAGF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;IACjC;EAEJ,CAAC;EAEDD,OAAO,EAAE,MAAOlB,OAAO,IAAK;IAAE;IAC5B,IAAI;MACF,MAAMU,QAAQ,GAAG,gCAAgC;MACjD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,QAAQ,CAAC;MACtC,MAAMU,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAElC,IAAGhB,MAAM,CAACC,IAAI,CAACc,IAAI,CAAC,CAACb,MAAM,GAAG,CAAC,EAAC;QAC5BP,OAAO,CAACoB,IAAI,CAAC;MACjB,CAAC,MACG;QACFE,KAAK,CAAC,2CAA2C,CAAC;MACpD;MACAN,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC5C,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAChC;EACF,CAAC;EAEDI,kBAAkB,EAAE,MAAAA,CAAO1B,KAAK,EAAE2B,QAAQ,KAAK;IAAE;IAC7C,IAAIC,QAAQ,GAAG5B,KAAK,CAAC6B,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACtC,IAAI;MACF,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,QAAQ,CAAC;MACzCD,QAAQ,CAACI,GAAG,CAAC;MAEb,IAAIG,QAAQ,GAAG,IAAI3B,QAAQ,CAAC,CAAC;MAC7B2B,QAAQ,CAACvB,MAAM,CAAC,aAAa,EAAEiB,QAAQ,CAAC;MAExC,MAAMf,QAAQ,GAAG,oCAAoC;MACrD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,QAAQ,EAAE;QACrCG,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEiB;MACR,CAAC,CAAC;MAEF,IAAIpB,QAAQ,CAACI,EAAE,EAAE;QACfC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC/B,CAAC,MAAM;QACLD,OAAO,CAACG,KAAK,CAAC,eAAe,CAAC;MAChC;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF;AACF,CAAC;AAED,eAAexB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}